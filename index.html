<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;500;600;700&display=swap" rel="stylesheet">
  <title>Bootcamp AITC</title>
  <link rel="stylesheet" href="./assets/styles/main.css">
</head>
<body>
  <header>
    <h1>Data Mahasiswa</h1>
    <a href="./form.html" target="_blank" class="text-black">Tambah +</a>
  </header>
  <main>
    <div>
      <input id="search" type="text" class="w-500px" placeholder="cari nama">
      <div id="empty" class="empty text-center d-none">
        <img src="./assets/images/empty.png" class="margin-x-auto" alt="empty image">
        <h4 class="font-medium">Hasil yang kamu cari tidak ditemukan</h4>
      </div>
      <div id="items" class="items">
        <article class="item">
          <div class="item-image">
            <img src="./assets/images/profile-1.png" alt="B.A. Baracus">
            <span class="ipk">IPK 3.5</span>
          </div>
          <div class="item-desc">
            <h5>B.A. Baracus</h5>
            <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry.
              Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book.</p>
          </div>
        </article>
        <article class="item">
          <div class="item-image">
            <img src="./assets/images/profile-2.png" alt="Theodore T.C. Calvin">
            <span class="ipk">IPK 3.2</span>
          </div>
          <div class="item-desc">
            <h5>Theodore T.C. Calvin</h5>
            <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Illum harum accusantium omnis?
              Dolorum eaque qui quam recusandae quia, exercitationem culpa minus esse quis temporibus consequuntur earum expedita laboriosam. Ratione, dolorem!</p>
          </div>
        </article>
        <article class="item">
          <div class="item-image">
            <img src="./assets/images/profile-3.png" alt="Sledge Hammer">
            <span class="ipk">IPK 3.01</span>
          </div>
          <div class="item-desc">
            <h5>Sledge Hammer</h5>
            <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Illum harum accusantium omnis?
              Dolorum eaque qui quam recusandae quia, exercitationem culpa minus esse quis temporibus consequuntur earum expedita laboriosam. Ratione, dolorem!</p>
          </div>
        </article>
        <article class="item">
          <div class="item-image">
            <img src="./assets/images/profile-4.png" alt="Peter Thornton">
            <span class="ipk">IPK 3.1</span>
          </div>
          <div class="item-desc">
            <h5>Peter Thornton</h5>
            <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Illum harum accusantium omnis?
              Dolorum eaque qui quam recusandae quia, exercitationem culpa minus esse quis temporibus consequuntur earum expedita laboriosam. Ratione, dolorem!</p>
          </div>
        </article>
        <article class="item">
          <div class="item-image">
            <img src="./assets/images/profile-5.png" alt="Lynn Tanner">
            <span class="ipk">IPK 2.9</span>
          </div>
          <div class="item-desc">
            <h5>Lynn Tanner</h5>
            <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Illum harum accusantium omnis?
              Dolorum eaque qui quam recusandae quia, exercitationem culpa minus esse quis temporibus consequuntur earum expedita laboriosam. Ratione, dolorem!</p>
          </div>
        </article>
        <article class="item">
          <div class="item-image">
            <img src="./assets/images/profile-6.png" alt="April Curtis">
            <span class="ipk">IPK 3.32</span>
          </div>
          <div class="item-desc">
            <h5>April Curtis</h5>
            <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Illum harum accusantium omnis?
              Dolorum eaque qui quam recusandae quia, exercitationem culpa minus esse quis temporibus consequuntur earum expedita laboriosam. Ratione, dolorem!</p>
          </div>
        </article>
        <article class="item">
          <div class="item-image">
            <img src="./assets/images/profile-7.png" alt="Angela Bower">
            <span class="ipk">IPK 3.92</span>
          </div>
          <div class="item-desc">
            <h5>Angela Bower</h5>
            <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Illum harum accusantium omnis?
              Dolorum eaque qui quam recusandae quia, exercitationem culpa minus esse quis temporibus consequuntur earum expedita laboriosam. Ratione, dolorem!</p>
          </div>
        </article>
        <article class="item"
          data-nama="Jonathan Higgins"
          data-desc="Lorem ipsum dolor sit amet consectetur adipisicing elit. Illum harum accusantium omnis? Dolorum eaque qui quam recusandae quia, exercitationem culpa minus esse quis temporibus consequuntur earum expedita laboriosam. Ratione, dolorem!"
          data-ipk="2.7"
          data-src="./assets/images/profile-8.png">
          <div class="item-image">
            <img src="./assets/images/profile-8.png" alt="Jonathan Higgins">
            <span class="ipk">IPK 2.7</span>
          </div>
          <div class="item-desc">
            <h5>Jonathan Higgins</h5>
            <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Illum harum accusantium omnis?
              Dolorum eaque qui quam recusandae quia, exercitationem culpa minus esse quis temporibus consequuntur earum expedita laboriosam. Ratione, dolorem!</p>
          </div>
        </article>
      </div>
    </div>
    <div id="modalDetail" class="modal d-none">
      <div class="modal-content" id="modalContent">
        <div class="modal-body d-flex">
          <div class="modal-image">
            <img src="./assets/images/profile-1.png" alt="B.A. Baracus">
          </div>
          <div class="modal-desc">
            <h3>B.A. Baracus</h3>
            <span class="ipk">IPK 2.7</span>
            <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry.
              Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book.</p>
          </div>
        </div>
        <div class="modal-footer">
          <div class="d-flex justify-between">
            <a href="form.html?id=" class="btn btn-secondary btn-link btn-large font-semibold">Edit</a>
            <form class="d-inline-block" method="POST" action="/index.html" onsubmit="if(!confirm('Apakah yakin dihapus?')) return false">
              <input type="hidden" value="DELETE" name="METHOD">
              <button class="btn btn-light btn-link btn-large" type="submit">Hapus</button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </main>
  <footer>
    <p class="text-center">AITC Bootcamp</p>
  </footer>
  <script>
    // function testCallback(fungsi) {
    //   fungsi();
    // }
    // testCallback(function(){
    //   console.log('testCallback');
    // });

    function mounted() {
      const search = document.getElementById("search");
      const empty = document.getElementsByClassName("empty");
      const itemsElem = document.getElementById("items");
      const items = document.querySelectorAll("#items .item");

      search.addEventListener("keyup", function() {
        const arrItem = Array.from(items);
        let count = 0;
        arrItem.forEach(function(item, index) {
          const name = item.querySelector(".item-desc h5").innerText;

          if (name.toLowerCase().includes(search.value.toLowerCase())) {
            item.classList.remove("d-none");
          } else {
            count += 1;
            item.classList.add("d-none");
          }
        });
        if (count === items.length) {
          empty[0].classList.remove("d-none");
          itemsElem.classList.add("d-none");
        } else {
          empty[0].classList.add("d-none");
          itemsElem.classList.remove("d-none");
        }
      })
    }
    window.addEventListener("load", mounted);
    
    //Display modal when item is clicked
    const itemsQuery = document.querySelectorAll("#items .item");
    const modal = document.querySelector("#modalDetail");
    const itemsArr = Array.from(itemsQuery);
    const editButton = document.querySelector(".modal-content .btn")

    itemsArr.forEach(function(item, index) {
       item.addEventListener('click', function(){
        if(modal.classList.contains("d-none")){
          //Get all content for modal
          const name = item.querySelector(".item-desc h5").innerText;
          const ipk = item.querySelector(".ipk").innerText;
          const desc = item.querySelector(".item-desc p").innerText;
          const img = item.querySelector(".item-image img").getAttribute('src');
          
          //Set all content for modal
          modal.querySelector(".modal-desc h3").innerText = name;
          modal.querySelector(".modal-desc .ipk").innerText = ipk;
          modal.querySelector(".modal-desc p").innerText = desc;
          modal.querySelector(".modal-image img").setAttribute("src", img);
          modal.classList.remove("d-none");
        }
       })
     })
     
    //Hide modal when outside of modal is cliked
    modal.addEventListener("click", function(e){
      const isClosest = e.target.closest("#modalContent");
      console.log(isClosest);
      if(!isClosest && !modal.classList.contains("d-none")){
        modal.classList.add("d-none");
      }
     })


  </script>
</body>
</html>